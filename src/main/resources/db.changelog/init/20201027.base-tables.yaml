databaseChangeLog:
  - logicalFilePath: no-path
  - changeSet:
      id: base init 1
      author: ikantsevich
      changes:
        - sql:
            comment: init baic tables
            dbms: mysql
            sql:
              CREATE TABLE IF NOT EXISTS university
              (
              un_id      INT AUTO_INCREMENT NOT NULL,
              un_name    VARCHAR(255)       NOT NULL,
              un_address VARCHAR(255)       NOT NULL,
              created    datetime DEFAULT CURRENT_TIMESTAMP,
              modified   datetime DEFAULT CURRENT_TIMESTAMP,
              PRIMARY KEY (un_id)
              );

              CREATE TABLE IF NOT EXISTS role
              (
              rol_id   INT AUTO_INCREMENT NOT NULL,
              name     VARCHAR(255)       NOT NULL,
              created  datetime DEFAULT CURRENT_TIMESTAMP,
              modified datetime DEFAULT CURRENT_TIMESTAMP,
              un_id    INT                NOT NULL,
              FOREIGN KEY (un_id) REFERENCES university (un_id),
              PRIMARY KEY (rol_id)
              );

              CREATE TABLE IF NOT EXISTS credential
              (
              cr_id    INT AUTO_INCREMENT NOT NULL,
              login    VARCHAR(255)       NOT NULL,
              password VARCHAR(255)       NOT NULL,
              created  datetime DEFAULT CURRENT_TIMESTAMP,
              modified datetime DEFAULT CURRENT_TIMESTAMP,
              un_id    INT                NOT NULL,
              rol_id   INT                NOT NULL,
              FOREIGN KEY (un_id) REFERENCES university (un_id),
              FOREIGN KEY (rol_id) REFERENCES role (rol_id),
              PRIMARY KEY (cr_id)
              );

              CREATE TABLE IF NOT EXISTS faculty
              (
              fa_id    INT AUTO_INCREMENT NOT NULL,
              fa_name  VARCHAR(255)       NOT NULL,
              created  datetime DEFAULT CURRENT_TIMESTAMP,
              modified datetime DEFAULT CURRENT_TIMESTAMP,
              un_id    INT                NOT NULL,
              FOREIGN KEY (un_id) REFERENCES university (un_id),
              PRIMARY KEY (fa_id)
              );

              CREATE TABLE IF NOT EXISTS cathedra
              (
              ca_id    INT AUTO_INCREMENT NOT NULL,
              ca_name  VARCHAR(255)       NOT NULL,
              created  datetime DEFAULT CURRENT_TIMESTAMP,
              modified datetime DEFAULT CURRENT_TIMESTAMP,
              un_id    INT                NOT NULL,
              FOREIGN KEY (un_id) REFERENCES university (un_id),
              PRIMARY KEY (ca_id),
              fac_id   INT                NOT NULL,
              FOREIGN KEY (fac_id) REFERENCES faculty (fa_id)
              );

              CREATE TABLE IF NOT EXISTS groupp
              (
              gr_id    INT AUTO_INCREMENT NOT NULL,
              gr_name  VARCHAR(255)       NOT NULL,
              created  datetime DEFAULT CURRENT_TIMESTAMP,
              modified datetime DEFAULT CURRENT_TIMESTAMP,
              dep_id   INT                NOT NULL,
              un_id    INT                NOT NULL,
              FOREIGN KEY (un_id) REFERENCES university (un_id),
              PRIMARY KEY (gr_id),
              FOREIGN KEY (dep_id) REFERENCES cathedra (ca_id)
              );

              CREATE TABLE IF NOT EXISTS subgroup
              (
              sgr_id     INT AUTO_INCREMENT NOT NULL,
              sgr_number INT                NOT NULL,
              created    datetime DEFAULT CURRENT_TIMESTAMP,
              modified   datetime DEFAULT CURRENT_TIMESTAMP,
              un_id      INT                NOT NULL,
              gr_id      INT                NOT NULL,
              FOREIGN KEY (gr_id) REFERENCES groupp (gr_id),
              FOREIGN KEY (un_id) REFERENCES university (un_id),
              PRIMARY KEY (sgr_id)
              );

              CREATE TABLE IF NOT EXISTS student
              (
              st_id         INT AUTO_INCREMENT NOT NULL,
              st_name       VARCHAR(255)       NOT NULL,
              st_created    datetime DEFAULT CURRENT_TIMESTAMP,
              st_modified   datetime DEFAULT CURRENT_TIMESTAMP,
              un_id         INT                NOT NULL,
              sgr_id        INT                NOT NULL,
              cr_id         INT                NOT NULL,
              st_age        INT unsigned       NOT NULL,
              st_sex        VARCHAR(1)         NOT NULL,
              st_is_capitan TINYINT            NOT NULL,
              FOREIGN KEY (sgr_id) REFERENCES subgroup (sgr_id),
              FOREIGN KEY (un_id) REFERENCES university (un_id),
              FOREIGN KEY (cr_id) REFERENCES credential (cr_id),
              PRIMARY KEY (st_id)
              );